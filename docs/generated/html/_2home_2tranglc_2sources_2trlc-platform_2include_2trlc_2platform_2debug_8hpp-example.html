<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TRLC Platform Library: /home/tranglc/sources/trlc-platform/include/trlc/platform/debug.hpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TRLC Platform Library
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Header-only C++ library for compile-time platform detection and abstraction</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_2home_2tranglc_2sources_2trlc-platform_2include_2trlc_2platform_2debug_8hpp-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">/home/tranglc/sources/trlc-platform/include/trlc/platform/debug.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>Check if the current build is a debug buildDetermines whether the code was compiled with debug settings enabled. This is typically controlled by the NDEBUG macro - if NDEBUG is not defined, this is considered a debug build.</p>
<dl class="section return"><dt>Returns</dt><dd>True if this is a debug build, false otherwise</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function is constexpr and evaluated at compile time</dd></dl>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> constexpr (<a name="a0"></a><a class="code" href="namespacetrlc_1_1platform.html#aa3f68196d5579b1ebb7575957ec06cc8">isDebugBuild</a>()) {</div>
<div class="line">    <span class="comment">// Debug-only optimizations or checks</span></div>
<div class="line">}</div>
<div class="ttc" id="anamespacetrlc_1_1platform_html_aa3f68196d5579b1ebb7575957ec06cc8"><div class="ttname"><a href="namespacetrlc_1_1platform.html#aa3f68196d5579b1ebb7575957ec06cc8">trlc::platform::isDebugBuild</a></div><div class="ttdeci">static bool isDebugBuild()</div><div class="ttdef"><b>Definition:</b> <a href="debug_8hpp_source.html#l00087">debug.hpp:87</a></div></div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="preprocessor">#pragma once</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;atomic&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;cstdlib&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span><a class="code" href="namespacetrlc.html">trlc</a> {</div>
<div class="line"><span class="keyword">namespace </span>platform {</div>
<div class="line"> </div>
<div class="line"><span class="comment">//==============================================================================</span></div>
<div class="line"><span class="comment">// Forward Declarations and Type Definitions</span></div>
<div class="line"><span class="comment">//==============================================================================</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using</span> <a name="a1"></a><a class="code" href="namespacetrlc_1_1platform.html#af61441b9ce8f9b49653ddfccf19155e0">AssertionHandler</a> = void (*)(<span class="keyword">const</span> <span class="keywordtype">char</span>* expression,</div>
<div class="line">                                  <span class="keyword">const</span> <span class="keywordtype">char</span>* file,</div>
<div class="line">                                  <span class="keywordtype">int</span> line,</div>
<div class="line">                                  <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">function</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Forward declaration of the default assertion handler</span></div>
<div class="line"><span class="keywordtype">void</span> <a name="a2"></a><a class="code" href="namespacetrlc_1_1platform.html#a9f9a41804a79dc9accef9d61f4ad9b5e">defaultAssertionHandler</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* expression,</div>
<div class="line">                             <span class="keyword">const</span> <span class="keywordtype">char</span>* file,</div>
<div class="line">                             <span class="keywordtype">int</span> line,</div>
<div class="line">                             <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">function</span>) noexcept;</div>
<div class="line"> </div>
<div class="line"><span class="comment">//==============================================================================</span></div>
<div class="line"><span class="comment">// Debug Mode Detection Functions</span></div>
<div class="line"><span class="comment">//==============================================================================</span></div>
<div class="line"> </div>
<div class="line">constexpr <span class="keywordtype">bool</span> <a class="code" href="namespacetrlc_1_1platform.html#aa3f68196d5579b1ebb7575957ec06cc8">isDebugBuild</a>() noexcept {</div>
<div class="line"><span class="preprocessor">#ifdef NDEBUG</span></div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">constexpr <span class="keywordtype">bool</span> <a name="a3"></a><a class="code" href="namespacetrlc_1_1platform.html#a27fcb60b12a1924938e9f26e6cdd0518">isReleaseBuild</a>() noexcept {</div>
<div class="line">    <span class="keywordflow">return</span> !<a class="code" href="namespacetrlc_1_1platform.html#aa3f68196d5579b1ebb7575957ec06cc8">isDebugBuild</a>();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">constexpr <span class="keywordtype">bool</span> <a name="a4"></a><a class="code" href="namespacetrlc_1_1platform.html#a5f3132e891d0611e5cd08a5a904b550e">hasDebugInfo</a>() noexcept {</div>
<div class="line">    <span class="comment">// In debug builds, debug info is usually available</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="namespacetrlc_1_1platform.html#aa3f68196d5579b1ebb7575957ec06cc8">isDebugBuild</a>()) {</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Some compilers provide debug info even in release builds</span></div>
<div class="line"><span class="preprocessor">#if defined(__GNUC__) || defined(__clang__)</span></div>
<div class="line">    <span class="comment">// GCC/Clang: Check for common debug flags</span></div>
<div class="line">    <span class="comment">// Note: This is compile-time approximation, actual availability</span></div>
<div class="line">    <span class="comment">// depends on command-line flags like -g</span></div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="namespacetrlc_1_1platform.html#aa3f68196d5579b1ebb7575957ec06cc8">isDebugBuild</a>();</div>
<div class="line"><span class="preprocessor">#elif defined(_MSC_VER)</span></div>
<div class="line">    <span class="comment">// MSVC: Debug info can be enabled independently of release/debug</span></div>
<div class="line">    <span class="comment">// We conservatively assume it&#39;s available in debug builds only</span></div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="namespacetrlc_1_1platform.html#aa3f68196d5579b1ebb7575957ec06cc8">isDebugBuild</a>();</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">    <span class="comment">// Unknown compiler: Conservative assumption</span></div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="namespacetrlc_1_1platform.html#aa3f68196d5579b1ebb7575957ec06cc8">isDebugBuild</a>();</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//==============================================================================</span></div>
<div class="line"><span class="comment">// Debug Utilities Class</span></div>
<div class="line"><span class="comment">//==============================================================================</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>DebugUtils {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="comment">//--------------------------------------------------------------------------</span></div>
<div class="line">    <span class="comment">// Assertion Management</span></div>
<div class="line">    <span class="comment">//--------------------------------------------------------------------------</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">void</span> <a name="a5"></a><a class="code" href="classtrlc_1_1platform_1_1DebugUtils.html#ae3cb1aed68401a56f4d8e2c94e9be157">setAssertionHandler</a>(<a class="code" href="namespacetrlc_1_1platform.html#af61441b9ce8f9b49653ddfccf19155e0">AssertionHandler</a> handler) noexcept {</div>
<div class="line">        <span class="keywordflow">if</span> (handler == <span class="keyword">nullptr</span>) {</div>
<div class="line">            handler = <a class="code" href="namespacetrlc_1_1platform.html#a9f9a41804a79dc9accef9d61f4ad9b5e">defaultAssertionHandler</a>;</div>
<div class="line">        }</div>
<div class="line">        _assertion_handler.store(handler, std::memory_order_release);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">static</span> <a class="code" href="namespacetrlc_1_1platform.html#af61441b9ce8f9b49653ddfccf19155e0">AssertionHandler</a> <a name="a6"></a><a class="code" href="classtrlc_1_1platform_1_1DebugUtils.html#ad22e5dddfc6af4fbcb850e6b3fb74b5b">getAssertionHandler</a>() noexcept {</div>
<div class="line">        <span class="keywordflow">return</span> _assertion_handler.load(std::memory_order_acquire);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//--------------------------------------------------------------------------</span></div>
<div class="line">    <span class="comment">// Debug Break Utilities</span></div>
<div class="line">    <span class="comment">//--------------------------------------------------------------------------</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">void</span> <a name="a7"></a><a class="code" href="classtrlc_1_1platform_1_1DebugUtils.html#ad5f4afd0252c4d4a51a3b396908c189b">debugBreak</a>() noexcept {</div>
<div class="line"><span class="preprocessor">#if defined(_WIN32) || defined(_WIN64)</span></div>
<div class="line">    <span class="comment">// Windows: Use __debugbreak() intrinsic</span></div>
<div class="line"><span class="preprocessor">    #if defined(_MSC_VER)</span></div>
<div class="line">        __debugbreak();</div>
<div class="line"><span class="preprocessor">    #elif defined(__GNUC__) || defined(__clang__)</span></div>
<div class="line">        <span class="comment">// MinGW or Clang on Windows</span></div>
<div class="line">        __builtin_trap();</div>
<div class="line"><span class="preprocessor">    #else</span></div>
<div class="line">        <span class="comment">// Unknown compiler on Windows</span></div>
<div class="line">        std::abort();</div>
<div class="line"><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="preprocessor">#elif defined(__i386__) || defined(__x86_64__)</span></div>
<div class="line">    <span class="comment">// x86/x64: Use int3 instruction</span></div>
<div class="line"><span class="preprocessor">    #if defined(__GNUC__) || defined(__clang__)</span></div>
<div class="line">        __asm__ <span class="keyword">volatile</span>(<span class="stringliteral">&quot;int3&quot;</span>);</div>
<div class="line"><span class="preprocessor">    #else</span></div>
<div class="line">        <span class="comment">// Fallback for unknown compiler</span></div>
<div class="line">        std::abort();</div>
<div class="line"><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="preprocessor">#elif defined(__aarch64__) || defined(__arm__)</span></div>
<div class="line">    <span class="comment">// ARM: Use builtin trap or BKPT instruction</span></div>
<div class="line"><span class="preprocessor">    #if defined(__GNUC__) || defined(__clang__)</span></div>
<div class="line">        __builtin_trap();</div>
<div class="line"><span class="preprocessor">    #else</span></div>
<div class="line">        std::abort();</div>
<div class="line"><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">    <span class="comment">// Unknown architecture: Use generic trap or abort</span></div>
<div class="line"><span class="preprocessor">    #if defined(__GNUC__) || defined(__clang__)</span></div>
<div class="line">        __builtin_trap();</div>
<div class="line"><span class="preprocessor">    #else</span></div>
<div class="line">        std::abort();</div>
<div class="line"><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    [[noreturn]] <span class="keyword">static</span> <span class="keywordtype">void</span> <a name="a8"></a><a class="code" href="classtrlc_1_1platform_1_1DebugUtils.html#af01386bf9b802a3bbbd2b2bfe84c5766">unreachable</a>() noexcept {</div>
<div class="line">        <span class="keywordflow">if</span> constexpr (<a class="code" href="namespacetrlc_1_1platform.html#aa3f68196d5579b1ebb7575957ec06cc8">isDebugBuild</a>()) {</div>
<div class="line">            <span class="comment">// In debug builds, make unreachable code obvious</span></div>
<div class="line">            <a class="code" href="namespacetrlc_1_1platform.html#a9f9a41804a79dc9accef9d61f4ad9b5e">defaultAssertionHandler</a>(<span class="stringliteral">&quot;unreachable code reached&quot;</span>, __FILE__, __LINE__, __func__);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Hint to compiler that this is unreachable</span></div>
<div class="line"><span class="preprocessor">#if defined(__GNUC__) || defined(__clang__)</span></div>
<div class="line">        __builtin_unreachable();</div>
<div class="line"><span class="preprocessor">#elif defined(_MSC_VER)</span></div>
<div class="line">        <span class="keyword">__assume</span>(<span class="keyword">false</span>);</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">        <span class="comment">// Fallback: abort the program</span></div>
<div class="line">        std::abort();</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    [[noreturn]] <span class="keyword">static</span> <span class="keywordtype">void</span> <a name="a9"></a><a class="code" href="classtrlc_1_1platform_1_1DebugUtils.html#ada47e1142b7dd4b65a32f1c3abf6b70f">abort</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* message = <span class="keyword">nullptr</span>) noexcept {</div>
<div class="line">        <span class="keywordflow">if</span> (message != <span class="keyword">nullptr</span>) {</div>
<div class="line">            std::cerr &lt;&lt; <span class="stringliteral">&quot;Program terminated: &quot;</span> &lt;&lt; message &lt;&lt; std::endl;</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            std::cerr &lt;&lt; <span class="stringliteral">&quot;Program terminated by DebugUtils::abort()&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// In debug builds, trigger a breakpoint first</span></div>
<div class="line">        <span class="keywordflow">if</span> constexpr (<a class="code" href="namespacetrlc_1_1platform.html#aa3f68196d5579b1ebb7575957ec06cc8">isDebugBuild</a>()) {</div>
<div class="line">            <a class="code" href="classtrlc_1_1platform_1_1DebugUtils.html#ad5f4afd0252c4d4a51a3b396908c189b">debugBreak</a>();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        std::abort();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//--------------------------------------------------------------------------</span></div>
<div class="line">    <span class="comment">// Stack Trace Support</span></div>
<div class="line">    <span class="comment">//--------------------------------------------------------------------------</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a name="a10"></a><a class="code" href="classtrlc_1_1platform_1_1DebugUtils.html#ad5b72d4babf90287e90b448bad450009">canCaptureStackTrace</a>() noexcept {</div>
<div class="line">        <span class="comment">// Platform-specific stack trace support detection</span></div>
<div class="line"><span class="preprocessor">#if defined(_WIN32) &amp;&amp; defined(_MSC_VER)</span></div>
<div class="line">        <span class="comment">// Windows with MSVC: StackWalk64 API available</span></div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="preprocessor">#elif defined(__GNUC__) || defined(__clang__)</span></div>
<div class="line">    <span class="comment">// GCC/Clang: Check for backtrace support</span></div>
<div class="line"><span class="preprocessor">    #if defined(__GLIBC__) || defined(__APPLE__) || defined(__FreeBSD__)</span></div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// backtrace() available</span></div>
<div class="line"><span class="preprocessor">    #else</span></div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// No backtrace support</span></div>
<div class="line"><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Unknown platform/compiler</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">void</span> <a name="a11"></a><a class="code" href="classtrlc_1_1platform_1_1DebugUtils.html#a145c681b19e1d47018438fa50013c398">printStackTrace</a>() noexcept {</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="classtrlc_1_1platform_1_1DebugUtils.html#ad5b72d4babf90287e90b448bad450009">canCaptureStackTrace</a>()) {</div>
<div class="line">            std::cerr &lt;&lt; <span class="stringliteral">&quot;Stack trace not available on this platform&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Platform-specific stack trace implementation</span></div>
<div class="line"><span class="preprocessor">#if defined(_WIN32) &amp;&amp; defined(_MSC_VER)</span></div>
<div class="line">        printStackTraceWindows();</div>
<div class="line"><span class="preprocessor">#elif defined(__GNUC__) || defined(__clang__)</span></div>
<div class="line"><span class="preprocessor">    #if defined(__GLIBC__) || defined(__APPLE__) || defined(__FreeBSD__)</span></div>
<div class="line">        printStackTraceUnix();</div>
<div class="line"><span class="preprocessor">    #else</span></div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Stack trace not implemented for this Unix variant&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Stack trace not implemented for this platform&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <span class="comment">//--------------------------------------------------------------------------</span></div>
<div class="line">    <span class="comment">// Private Members and Helper Functions</span></div>
<div class="line">    <span class="comment">//--------------------------------------------------------------------------</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">static</span> std::atomic&lt;AssertionHandler&gt; _assertion_handler;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#if defined(_WIN32) &amp;&amp; defined(_MSC_VER)</span></div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">void</span> printStackTraceWindows() noexcept {</div>
<div class="line">        <span class="comment">// Implementation would use StackWalk64 API</span></div>
<div class="line">        <span class="comment">// For brevity, we just print a placeholder message</span></div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Windows stack trace would be printed here&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;(StackWalk64 implementation not included in this example)&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#if defined(__GNUC__) || defined(__clang__)</span></div>
<div class="line"><span class="preprocessor">    #if defined(__GLIBC__) || defined(__APPLE__) || defined(__FreeBSD__)</span></div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">void</span> printStackTraceUnix() noexcept {</div>
<div class="line">        <span class="comment">// Implementation would use backtrace() and backtrace_symbols()</span></div>
<div class="line">        <span class="comment">// For brevity, we just print a placeholder message</span></div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Unix stack trace would be printed here&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;(backtrace() implementation not included in this example)&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line"><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Initialize the atomic assertion handler with the default (inline to avoid ODR issues)</span></div>
<div class="line"><span class="keyword">inline</span> std::atomic&lt;AssertionHandler&gt; DebugUtils::_assertion_handler{<a class="code" href="namespacetrlc_1_1platform.html#a9f9a41804a79dc9accef9d61f4ad9b5e">defaultAssertionHandler</a>};</div>
<div class="line"> </div>
<div class="line"><span class="comment">//==============================================================================</span></div>
<div class="line"><span class="comment">// Default Assertion Handler</span></div>
<div class="line"><span class="comment">//==============================================================================</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacetrlc_1_1platform.html#a9f9a41804a79dc9accef9d61f4ad9b5e">defaultAssertionHandler</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* expression,</div>
<div class="line">                                    <span class="keyword">const</span> <span class="keywordtype">char</span>* file,</div>
<div class="line">                                    <span class="keywordtype">int</span> line,</div>
<div class="line">                                    <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">function</span>) noexcept {</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; std::string(60, <span class="charliteral">&#39;=&#39;</span>) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;ASSERTION FAILED\n&quot;</span>;</div>
<div class="line">    std::cerr &lt;&lt; std::string(60, <span class="charliteral">&#39;=&#39;</span>) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;Expression: &quot;</span> &lt;&lt; expression &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;File:       &quot;</span> &lt;&lt; file &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;Line:       &quot;</span> &lt;&lt; line &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;Function:   &quot;</span> &lt;&lt; <span class="keyword">function</span> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    std::cerr &lt;&lt; std::string(60, <span class="charliteral">&#39;=&#39;</span>) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Print stack trace if available</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classtrlc_1_1platform_1_1DebugUtils.html#ad5b72d4babf90287e90b448bad450009">DebugUtils::canCaptureStackTrace</a>()) {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;\nStack trace:\n&quot;</span>;</div>
<div class="line">        <a class="code" href="classtrlc_1_1platform_1_1DebugUtils.html#a145c681b19e1d47018438fa50013c398">DebugUtils::printStackTrace</a>();</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;Program will now terminate.\n&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Trigger debugger break in debug builds</span></div>
<div class="line">    <span class="keywordflow">if</span> constexpr (<a class="code" href="namespacetrlc_1_1platform.html#aa3f68196d5579b1ebb7575957ec06cc8">isDebugBuild</a>()) {</div>
<div class="line">        <a class="code" href="classtrlc_1_1platform_1_1DebugUtils.html#ad5f4afd0252c4d4a51a3b396908c189b">DebugUtils::debugBreak</a>();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    std::abort();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">}  <span class="comment">// namespace platform</span></div>
<div class="line">}  <span class="comment">// namespace trlc</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//==============================================================================</span></div>
<div class="line"><span class="comment">// Debug Macros</span></div>
<div class="line"><span class="comment">//==============================================================================</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef NDEBUG</span></div>
<div class="line"><span class="preprocessor">    #define TRLC_DEBUG_BUILD 0</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor">    #define TRLC_DEBUG_BUILD 1</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#if TRLC_DEBUG_BUILD</span></div>
<div class="line"><span class="preprocessor">    #define TRLC_ASSERT(expr)                                        \</span></div>
<div class="line"><span class="preprocessor">        ((expr) ? void(0)                                            \</span></div>
<div class="line"><span class="preprocessor">                : trlc::platform::DebugUtils::getAssertionHandler()( \</span></div>
<div class="line"><span class="preprocessor">                      #expr, __FILE__, __LINE__, __func__))</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor">    #define TRLC_ASSERT(expr) ((void)0)</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#if TRLC_DEBUG_BUILD</span></div>
<div class="line"><span class="preprocessor">    #define TRLC_DEBUG_ONLY(code) code</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor">    #define TRLC_DEBUG_ONLY(code) ((void)0)</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef TRLC_UNREACHABLE</span></div>
<div class="line"><span class="preprocessor">    #undef TRLC_UNREACHABLE</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor">#define TRLC_UNREACHABLE() trlc::platform::DebugUtils::unreachable()</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define TRLC_ABORT(msg) trlc::platform::DebugUtils::abort(msg)</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#if defined(_MSC_VER)</span></div>
<div class="line">   <span class="comment">// Microsoft Visual C++: Use intrinsic</span></div>
<div class="line"><span class="preprocessor">    #define TRLC_DEBUG_BREAK() __debugbreak()</span></div>
<div class="line"><span class="preprocessor">#elif defined(__GNUC__) || defined(__clang__)</span></div>
<div class="line">   <span class="comment">// GCC or Clang: Use platform-specific inline assembly or builtin</span></div>
<div class="line"><span class="preprocessor">    #if defined(__i386__) || defined(__x86_64__)</span></div>
<div class="line">   <span class="comment">// x86/x64: Use int3 instruction</span></div>
<div class="line"><span class="preprocessor">        #define TRLC_DEBUG_BREAK() __asm__ volatile(&quot;int3&quot;</span>)</div>
<div class="line"><span class="preprocessor">    #else</span></div>
<div class="line">   <span class="comment">// Other architectures: Use compiler builtin</span></div>
<div class="line"><span class="preprocessor">        #define TRLC_DEBUG_BREAK() __builtin_trap()</span></div>
<div class="line"><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">   <span class="comment">// Unknown compiler: Fall back to DebugUtils implementation</span></div>
<div class="line"><span class="preprocessor">    #define TRLC_DEBUG_BREAK() trlc::platform::DebugUtils::debugBreak()</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//==============================================================================</span></div>
<div class="line"><span class="comment">// Compile-Time Validation</span></div>
<div class="line"><span class="comment">//==============================================================================</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Verify that debug detection works correctly</span></div>
<div class="line">static_assert(<a class="code" href="namespacetrlc_1_1platform.html#aa3f68196d5579b1ebb7575957ec06cc8">trlc::platform::isDebugBuild</a>() == !<a class="code" href="namespacetrlc_1_1platform.html#a27fcb60b12a1924938e9f26e6cdd0518">trlc::platform::isReleaseBuild</a>(),</div>
<div class="line">              <span class="stringliteral">&quot;Debug and release build detection must be mutually exclusive&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Verify that the debug build macro is consistent</span></div>
<div class="line"><span class="preprocessor">#if TRLC_DEBUG_BUILD</span></div>
<div class="line">static_assert(<a class="code" href="namespacetrlc_1_1platform.html#aa3f68196d5579b1ebb7575957ec06cc8">trlc::platform::isDebugBuild</a>(),</div>
<div class="line">              <span class="stringliteral">&quot;TRLC_DEBUG_BUILD macro should match isDebugBuild() function&quot;</span>);</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">static_assert(<a class="code" href="namespacetrlc_1_1platform.html#a27fcb60b12a1924938e9f26e6cdd0518">trlc::platform::isReleaseBuild</a>(),</div>
<div class="line">              <span class="stringliteral">&quot;TRLC_DEBUG_BUILD macro should match build detection functions&quot;</span>);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Verify that the assertion handler type is correctly defined</span></div>
<div class="line">static_assert(std::is_same_v&lt;<a class="code" href="namespacetrlc_1_1platform.html#af61441b9ce8f9b49653ddfccf19155e0">trlc::platform::AssertionHandler</a>,</div>
<div class="line">                             <span class="keywordtype">void</span> (*)(<span class="keyword">const</span> <span class="keywordtype">char</span>*, <span class="keyword">const</span> <span class="keywordtype">char</span>*, <span class="keywordtype">int</span>, <span class="keyword">const</span> <span class="keywordtype">char</span>*)&gt;,</div>
<div class="line">              <span class="stringliteral">&quot;AssertionHandler type signature must match specification&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//==============================================================================</span></div>
<div class="line"><span class="comment">// Documentation Examples and Usage Notes</span></div>
<div class="line"><span class="comment">//==============================================================================</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">Example Usage:</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">1. Basic assertion:</span></div>
<div class="line"><span class="comment">   TRLC_ASSERT(ptr != nullptr);</span></div>
<div class="line"><span class="comment">   TRLC_ASSERT(index &lt; size);</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">2. Custom assertion handler:</span></div>
<div class="line"><span class="comment">   trlc::platform::DebugUtils::setAssertionHandler(</span></div>
<div class="line"><span class="comment">       [](const char* expr, const char* file, int line, const char* func) {</span></div>
<div class="line"><span class="comment">           // Custom logging or error handling</span></div>
<div class="line"><span class="comment">           myLogger.error(&quot;Assertion failed: {} at {}:{} in {}&quot;,</span></div>
<div class="line"><span class="comment">                         expr, file, line, func);</span></div>
<div class="line"><span class="comment">           throw std::runtime_error(&quot;Assertion failed&quot;);</span></div>
<div class="line"><span class="comment">       }</span></div>
<div class="line"><span class="comment">   );</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">3. Debug-only code:</span></div>
<div class="line"><span class="comment">   TRLC_DEBUG_ONLY(</span></div>
<div class="line"><span class="comment">       auto start_time = std::chrono::high_resolution_clock::now();</span></div>
<div class="line"><span class="comment">   );</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   // ... some operation ...</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   TRLC_DEBUG_ONLY(</span></div>
<div class="line"><span class="comment">       auto end_time = std::chrono::high_resolution_clock::now();</span></div>
<div class="line"><span class="comment">       std::cout &lt;&lt; &quot;Operation took: &quot;</span></div>
<div class="line"><span class="comment">                 &lt;&lt; std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(</span></div>
<div class="line"><span class="comment">                        end_time - start_time).count() &lt;&lt; &quot;ms&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><span class="comment">   );</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">4. Unreachable code marking:</span></div>
<div class="line"><span class="comment">   enum class State { A, B, C };</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   std::string toString(State s) {</span></div>
<div class="line"><span class="comment">       switch (s) {</span></div>
<div class="line"><span class="comment">           case State::A: return &quot;A&quot;;</span></div>
<div class="line"><span class="comment">           case State::B: return &quot;B&quot;;</span></div>
<div class="line"><span class="comment">           case State::C: return &quot;C&quot;;</span></div>
<div class="line"><span class="comment">       }</span></div>
<div class="line"><span class="comment">       TRLC_UNREACHABLE();  // Should never reach here</span></div>
<div class="line"><span class="comment">   }</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">5. Controlled termination:</span></div>
<div class="line"><span class="comment">   if (!initialize_critical_resource()) {</span></div>
<div class="line"><span class="comment">       TRLC_ABORT(&quot;Failed to initialize critical resource&quot;);</span></div>
<div class="line"><span class="comment">   }</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">Thread Safety:</span></div>
<div class="line"><span class="comment">- All DebugUtils static methods are thread-safe</span></div>
<div class="line"><span class="comment">- The assertion handler can be safely changed from any thread</span></div>
<div class="line"><span class="comment">- Multiple threads can safely call assertion-related functions</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">Performance:</span></div>
<div class="line"><span class="comment">- Zero overhead in release builds (macros expand to nothing)</span></div>
<div class="line"><span class="comment">- Minimal overhead in debug builds</span></div>
<div class="line"><span class="comment">- Assertion handler lookup uses atomic operations</span></div>
<div class="line"><span class="comment">- Stack trace capture is expensive but only used on failures</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="ttc" id="aclasstrlc_1_1platform_1_1DebugUtils_html_a145c681b19e1d47018438fa50013c398"><div class="ttname"><a href="classtrlc_1_1platform_1_1DebugUtils.html#a145c681b19e1d47018438fa50013c398">trlc::platform::DebugUtils::printStackTrace</a></div><div class="ttdeci">static void printStackTrace()</div><div class="ttdef"><b>Definition:</b> <a href="debug_8hpp_source.html#l00379">debug.hpp:379</a></div></div>
<div class="ttc" id="aclasstrlc_1_1platform_1_1DebugUtils_html_ad22e5dddfc6af4fbcb850e6b3fb74b5b"><div class="ttname"><a href="classtrlc_1_1platform_1_1DebugUtils.html#ad22e5dddfc6af4fbcb850e6b3fb74b5b">trlc::platform::DebugUtils::getAssertionHandler</a></div><div class="ttdeci">static AssertionHandler getAssertionHandler()</div><div class="ttdoc">Get the current assertion handler.</div><div class="ttdef"><b>Definition:</b> <a href="debug_8hpp_source.html#l00200">debug.hpp:200</a></div></div>
<div class="ttc" id="aclasstrlc_1_1platform_1_1DebugUtils_html_ad5b72d4babf90287e90b448bad450009"><div class="ttname"><a href="classtrlc_1_1platform_1_1DebugUtils.html#ad5b72d4babf90287e90b448bad450009">trlc::platform::DebugUtils::canCaptureStackTrace</a></div><div class="ttdeci">static bool canCaptureStackTrace()</div><div class="ttdoc">Check if stack trace capture is supported.</div><div class="ttdef"><b>Definition:</b> <a href="debug_8hpp_source.html#l00344">debug.hpp:344</a></div></div>
<div class="ttc" id="aclasstrlc_1_1platform_1_1DebugUtils_html_ad5f4afd0252c4d4a51a3b396908c189b"><div class="ttname"><a href="classtrlc_1_1platform_1_1DebugUtils.html#ad5f4afd0252c4d4a51a3b396908c189b">trlc::platform::DebugUtils::debugBreak</a></div><div class="ttdeci">static void debugBreak()</div><div class="ttdef"><b>Definition:</b> <a href="debug_8hpp_source.html#l00225">debug.hpp:225</a></div></div>
<div class="ttc" id="aclasstrlc_1_1platform_1_1DebugUtils_html_ada47e1142b7dd4b65a32f1c3abf6b70f"><div class="ttname"><a href="classtrlc_1_1platform_1_1DebugUtils.html#ada47e1142b7dd4b65a32f1c3abf6b70f">trlc::platform::DebugUtils::abort</a></div><div class="ttdeci">static void abort(const char *message=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8hpp_source.html#l00315">debug.hpp:315</a></div></div>
<div class="ttc" id="aclasstrlc_1_1platform_1_1DebugUtils_html_ae3cb1aed68401a56f4d8e2c94e9be157"><div class="ttname"><a href="classtrlc_1_1platform_1_1DebugUtils.html#ae3cb1aed68401a56f4d8e2c94e9be157">trlc::platform::DebugUtils::setAssertionHandler</a></div><div class="ttdeci">static void setAssertionHandler(AssertionHandler handler)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8hpp_source.html#l00184">debug.hpp:184</a></div></div>
<div class="ttc" id="aclasstrlc_1_1platform_1_1DebugUtils_html_af01386bf9b802a3bbbd2b2bfe84c5766"><div class="ttname"><a href="classtrlc_1_1platform_1_1DebugUtils.html#af01386bf9b802a3bbbd2b2bfe84c5766">trlc::platform::DebugUtils::unreachable</a></div><div class="ttdeci">static void unreachable()</div><div class="ttdef"><b>Definition:</b> <a href="debug_8hpp_source.html#l00281">debug.hpp:281</a></div></div>
<div class="ttc" id="anamespacetrlc_1_1platform_html_a27fcb60b12a1924938e9f26e6cdd0518"><div class="ttname"><a href="namespacetrlc_1_1platform.html#a27fcb60b12a1924938e9f26e6cdd0518">trlc::platform::isReleaseBuild</a></div><div class="ttdeci">static bool isReleaseBuild()</div><div class="ttdoc">Check if the current build is a release build.</div><div class="ttdef"><b>Definition:</b> <a href="debug_8hpp_source.html#l00105">debug.hpp:105</a></div></div>
<div class="ttc" id="anamespacetrlc_1_1platform_html_a5f3132e891d0611e5cd08a5a904b550e"><div class="ttname"><a href="namespacetrlc_1_1platform.html#a5f3132e891d0611e5cd08a5a904b550e">trlc::platform::hasDebugInfo</a></div><div class="ttdeci">static bool hasDebugInfo()</div><div class="ttdoc">Check if debug information is available.</div><div class="ttdef"><b>Definition:</b> <a href="debug_8hpp_source.html#l00121">debug.hpp:121</a></div></div>
<div class="ttc" id="anamespacetrlc_1_1platform_html_a9f9a41804a79dc9accef9d61f4ad9b5e"><div class="ttname"><a href="namespacetrlc_1_1platform.html#a9f9a41804a79dc9accef9d61f4ad9b5e">trlc::platform::defaultAssertionHandler</a></div><div class="ttdeci">void defaultAssertionHandler(const char *expression, const char *file, int line, const char *function)</div><div class="ttdoc">Default assertion handler implementation.</div><div class="ttdef"><b>Definition:</b> <a href="debug_8hpp_source.html#l00461">debug.hpp:461</a></div></div>
<div class="ttc" id="anamespacetrlc_1_1platform_html_af61441b9ce8f9b49653ddfccf19155e0"><div class="ttname"><a href="namespacetrlc_1_1platform.html#af61441b9ce8f9b49653ddfccf19155e0">trlc::platform::AssertionHandler</a></div><div class="ttdeci">void(*)(const char *expression, const char *file, int line, const char *function) AssertionHandler</div><div class="ttdoc">Assertion handler function pointer type.</div><div class="ttdef"><b>Definition:</b> <a href="debug_8hpp_source.html#l00054">debug.hpp:57</a></div></div>
<div class="ttc" id="anamespacetrlc_html"><div class="ttname"><a href="namespacetrlc.html">trlc</a></div><div class="ttdef"><b>Definition:</b> <a href="architecture_8hpp_source.html#l00070">architecture.hpp:70</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Aug 27 2025 14:26:37 for TRLC Platform Library by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
